{% load staticfiles %}
<!Doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>PartData</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <script type="text/javascript" src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
        <link rel="stylesheet" href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" />
        <script type="text/javascript" src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
        <style type="text/css">
        .dropdown-submenu {
        position: relative;
        }
        .dropdown-submenu>.dropdown-menu {
        top: 0;
        left: 100%;
        margin-top: -6px;
        margin-left: -1px;
        -webkit-border-radius: 0 6px 6px 6px;
        -moz-border-radius: 0 6px 6px;
        border-radius: 0 6px 6px 6px;
        }
        .dropdown-submenu:hover>.dropdown-menu {
        display: block;
        }
        .dropdown-submenu>a:after {
        display: block;
        content: " ";
        float: right;
        width: 0;
        height: 0;
        border-color: transparent;
        border-style: solid;
        border-width: 5px 0 5px 5px;
        border-left-color: #ccc;
        margin-top: 5px;
        margin-right: -10px;
        }
        .dropdown-submenu:hover>a:after {
        border-left-color: #fff;
        }
        .dropdown-submenu.pull-left {
        float: none;
        }
        .dropdown-submenu.pull-left>.dropdown-menu {
        left: -100%;
        margin-left: 10px;
        -webkit-border-radius: 6px 0 6px 6px;
        -moz-border-radius: 6px 0 6px 6px;
        border-radius: 6px 0 6px 6px;
        }
        </style>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
        <!--Fonts-->
        <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!--owl-carousel css-->
        <link rel="stylesheet" href="{% static 'bootstrap/css/owl-carousel/owl.carousel.css' %}">
        <link rel="stylesheet" href="{% static 'bootstrap/css/owl-carousel/owl.theme.css' %}">
        <link rel="stylesheet" href="{% static 'bootstrap/css/owl-carousel/owl.transitions.css' %}">
        <!--        <link rel="stylesheet"  href="css/animations.css">-->
        <link rel="stylesheet" href="{% static 'bootstrap/css/font-awesome.min.css' %}">
        <link rel="stylesheet" href="{% static 'bootstrap/css/main.css' %}">
        <link rel="stylesheet" href="{% static 'bootstrap/css/color1.css' %}">
        <script src="{% static 'bootstrap/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js' %}"></script>
        <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Megrim" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.3/noty.css" rel="stylesheet">
        <script src="https://unpkg.com/smiles-drawer@1.0.2/dist/smiles-drawer.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.3/noty.min.js"></script>
    </head>
    <body id="page-top" class="index" style="padding-top: 0px">
        <!-- Preloader -->
        <header id="home" style="margin-bottom: 40px">
            <!-- Navigation -->
            <nav id="mainNav" class="navbar navbar-default-nothone navbar-custom navbar-fixed-top">
                <div class="container">
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav text-center">
                            <li class="logo-holder">
                                <a href="index1.html">
                                <img src="{% static 'bootstrap/images/logos/small-logo-light.png' %}" width='100' height='35' style="margin-top:-15px"></a>
                            </li>
                            <li><a href="{% url 'index' %}">Home</a></li>
                        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown">DataBase</a>
                            <ul class="dropdown-menu" role="menu">
                                <li style="margin-left: 30px"><a href="{% url 'partdata' %}">PartData</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'metadata' %}">MetaData</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'plasmiddata' %}">Plasmid Data</a></li>
                            </ul>
                        </li>
                        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown">Tools</a>
                            <ul class="dropdown-menu" role="menu">
                                <li style="margin-left: 30px"><a href="{% url 'tool1' %}">Smiles-drawer-2D</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'tool3' %}">Smiles-drawer-3D</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'mod2sbml' %}">mod to sbml</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'gemindex:gemindex' %}">Gemtract</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'prediction' %}">Prediction</a></li>
                            </ul>
                        </li>
                        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown">Information</a>
                            <ul class="dropdown-menu" role="menu">
                                <li style="margin-left: 30px"><a href="{% url 'species' %}">species</a></li>
                                <li style="margin-left: 30px"><a href="{% url 'partinfo' %}">PartInfo</a></li>
                            </ul>
                        </li>
                        <li><a href="{% url 'help' %}">Help</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
<br /><br /><br /><br />
<div>
    <h1>
    <img src="{% static 'bootstrap/images/logos/big-logo.jpg'%}" width='127.4' height='86.9'>
    <br />
    <h1><font color=black>PHOSYME</font></h1>
    </h1>
</div>
</nav>
</header>
<!--SELECT-->
<div class="container">
<div class="form-group">
<h3> <font style="margin-left: 15px">Start your prediction</font></h3>
<hr>
<form>
    <!-- <div class="input-group form-group" style=""> -->
    <div class="row">
        <div class="col-md-1 col-md-offset-3">
            Enzyme
            <!-- <span class="input-group-addon" id="basic-addon1">Enzyme</font></span> -->
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control" id="enzyme" name="enzyme" style="width:400px;margin-left:-10%" value="" placeholder="MGSLKES">
        </div>
    </div>
    <div class="row" style="padding-top:10px">
        <div class="col-md-1 col-md-offset-3">
            Entry
            <!-- <span class="input-group-addon" id="basic-addon1">Enzyme</font></span> -->
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control" id="entry" name="entry" style="width:400px;margin-left:-10%" value="" placeholder="OC(=O)C(=C)OP(=O)(O)O">
        </div>
    </div>
    <div class="col-md-4">
            <!-- <input id="input" type="text" class="parser" placeholder="Enter a valid SMILES ..." /> -->
            <div id="log">&nbsp;</div>
                <div class="canvas-container">
                    <canvas id="output-canvas" width="50" height="50"></canvas>
                </div>
        </div>
    <div style="padding-top: 10px" class="row">
        <div class="col-md-4 col-md-offset-3">
            Species<select class="selectpicker" data-live-search="true" id="species"
                maxlength="200" name="species" style="height:30px;background-color: white;margin-bottom: 10px">
                <option value="ALY" selected="ALY">ALY</option>
                <option value="BNA">BNA</option>
                <option value="BRP">BRP</option>
                <option value="CMAX">CMAX</option>
                <option value="CSAT">CSAT</option>
                <option value="GAB">GAB</option>
                <option value="NHE">NHE</option>
                <option value="Other">Other</option>
            </select>
            <br>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-md-offset-5">
            <!-- <span class="input-group-btn"> -->
            <button type="button" class="btn btn-default" id="predict" style="border:none;">Predict<span class="glyphicon glyphicon-left-hand"></span></button>
            <!-- </span> -->
        </div>
        </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->
    </div>
</form>

<div class="container">
<h3> <font style="margin-left: 15px" id="Resulttitle"></font></h3>
<p id="res" style="text-align: center;"></p>
<hr>
</div>
<script type="text/javascript">
$('.dropdown li a').click(function () {
console.log(this);
title = $(this).attr("data-title");
id = $(this).attr("data-index");
$("#select-title").text(title);
$("#category_id").val(id);
})
</script>
<script type="text/javascript">
$(function () {
$(".dropdown").mouseover(function () {
$(this).addClass("open");
});
$(".dropdown").mouseleave(function(){
$(this).removeClass("open");
})
})
</script>
<script>
    // function showresult(){
    $(document).ready(function(){
      $("#predict").click(function(){
        var enzyme = $("#enzyme").val();
        var entry = $("#entry").val();
        var species = $("#species").val();
        $.ajax({
            type:"GET",
            url:"/predictresult/",
            data:{'enzyme':enzyme, 'entry':entry,'species':species},
            success: function(ret){
                    $('#res').html(ret)
                    $('#Resulttitle').html("Result")
                    // document.getElementById("res").innerHTML=ret
                     },
            error: function () {
                        console.log(error);
                    },
        })
      })
    })
// }
</script>
<script>
    var input = document.getElementById('entry');
    var debugCheckbox = document.getElementById('debug');
    var bondThicknessInput = document.getElementById('bondThickness')
    var textSizeInput = document.getElementById('textSize');
    var bondLengthInput = document.getElementById('bondLength');
    var shortBondLengthInput = document.getElementById('shortBondLength');
    var bondSpacingInput = document.getElementById('bondSpacing');
    var sizeInput = document.getElementById('size');
    var overlapInput = document.getElementById('overlap');

    var options = {
      debug: false,
      atomVisualization: 'default'
    }

    var smilesDrawer = new SmilesDrawer.Drawer(options);
    var input = document.getElementById('entry');
    var log = document.getElementById('log');

    function draw() {
      let t = performance.now();

      SmilesDrawer.parse(input.value, function (tree) {
        smilesDrawer.draw(tree, 'output-canvas', 'light', false);
        let td = performance.now() - t;
        log.innerHTML = '&nbsp;';
        log.style.visibility = 'hidden';

        new Noty({
          text: 'Drawing took ' + td.toFixed(3) + 'ms with a total overlap score of ' + smilesDrawer.getTotalOverlapScore().toFixed(3) + '.',
          killer: true,
          timeout: 2000,
          animation: {
            open: null,
            close: null
          }
        }).show();
      }, function (err) {
        log.innerHTML = err;
        log.style.visibility = 'visible';
        console.log(err);
      });      
    }

    function updateOptions() {
      smilesDrawer = new SmilesDrawer.Drawer(options);
      draw();
    }

    document.addEventListener('DOMContentLoaded', function (event) {
      input.addEventListener('input', function () {
        draw();
      });

      debugCheckbox.addEventListener('click', function () {
        options.debug = debugCheckbox.checked ? true : false;
        updateOptions();
      });

      textSizeInput.addEventListener('input', function () {
        options.fontSizeLarge = parseInt(textSizeInput.value);
        options.fontSizeSmall = (3 / 5) * options.fontSizeLarge;
        updateOptions();
      });

      bondThicknessInput.addEventListener('input', function () {
        options.bondThickness = parseFloat(bondThicknessInput.value);
        updateOptions();
      });

      bondLengthInput.addEventListener('input', function () {
        options.bondLength = parseInt(bondLengthInput.value);
        updateOptions();
      });

      shortBondLengthInput.addEventListener('input', function () {
        options.shortBondLength = parseInt(shortBondLengthInput.value) / 100;
        updateOptions();
      });

      bondSpacingInput.addEventListener('input', function () {
        options.bondSpacing = parseInt(bondSpacingInput.value);
        updateOptions();
      });

      sizeInput.addEventListener('input', function () {
        options.width = parseInt(sizeInput.value);
        options.height = parseInt(sizeInput.value);
        updateOptions();
      });

      overlapInput.addEventListener('input', function () {
        options.overlapResolutionIterations = parseInt(overlapInput.value);
        updateOptions();
      });
    });
  </script>
</body>
</html>